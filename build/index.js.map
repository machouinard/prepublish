{"version":3,"file":"index.js","mappings":"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","sources":["webpack://prepublish/./node_modules/@wordpress/icons/build-module/icon/index.js","webpack://prepublish/./node_modules/@wordpress/icons/build-module/library/star-empty.js","webpack://prepublish/./node_modules/@wordpress/icons/build-module/library/star-filled.js","webpack://prepublish/./src/PrePublishDisplay.js","webpack://prepublish/./src/constants.js","webpack://prepublish/external window [\"wp\",\"blocks\"]","webpack://prepublish/external window [\"wp\",\"components\"]","webpack://prepublish/external window [\"wp\",\"data\"]","webpack://prepublish/external window [\"wp\",\"editPost\"]","webpack://prepublish/external window [\"wp\",\"element\"]","webpack://prepublish/external window [\"wp\",\"plugins\"]","webpack://prepublish/external window [\"wp\",\"primitives\"]","webpack://prepublish/external window [\"wp\",\"wordcount\"]","webpack://prepublish/webpack/bootstrap","webpack://prepublish/webpack/runtime/compat get default export","webpack://prepublish/webpack/runtime/define property getters","webpack://prepublish/webpack/runtime/hasOwnProperty shorthand","webpack://prepublish/webpack/runtime/make namespace object","webpack://prepublish/./src/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { cloneElement } from '@wordpress/element';\n/** @typedef {{icon: JSX.Element, size?: number} & import('@wordpress/primitives').SVGProps} IconProps */\n\n/**\n * Return an SVG icon.\n *\n * @param {IconProps} props icon is the SVG component to render\n *                          size is a number specifiying the icon size in pixels\n *                          Other props will be passed to wrapped SVG component\n *\n * @return {JSX.Element}  Icon component\n */\n\nfunction Icon(_ref) {\n  let {\n    icon,\n    size = 24,\n    ...props\n  } = _ref;\n  return cloneElement(icon, {\n    width: size,\n    height: size,\n    ...props\n  });\n}\n\nexport default Icon;\n//# sourceMappingURL=index.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst starEmpty = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  fillRule: \"evenodd\",\n  d: \"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z\",\n  clipRule: \"evenodd\"\n}));\nexport default starEmpty;\n//# sourceMappingURL=star-empty.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst starFilled = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z\"\n}));\nexport default starFilled;\n//# sourceMappingURL=star-filled.js.map","import { Icon, starEmpty, starFilled } from '@wordpress/icons';\nimport { PanelBody, PanelRow } from '@wordpress/components';\n\nconst PrePublishDisplay = ( { wordCount, wordLock, imgLock } ) => {\n\n\tconsole.log( `wordLock: ${ wordLock }` );\n\n\tconst wordIcon = wordLock ? starEmpty : starFilled;\n\tconst imgIcon = imgLock ? starEmpty : starFilled;\n\n\treturn (\n\t\t<PanelBody>\n\t\t\t<PanelRow>\n\t\t\t\t<Icon icon={ wordIcon }/>\n\t\t\t\t{ `WordCount: ${ wordCount }` }\n\t\t\t</PanelRow>\n\t\t\t<PanelRow>\n\t\t\t\t<Icon icon={ imgIcon }/>\n\t\t\t\t{ `Featured Image?` }\n\t\t\t</PanelRow>\n\t\t</PanelBody>\n\t);\n};\n\nexport default PrePublishDisplay;\n","const REQUIRED_WORD_COUNT = 10;\n\nexport { REQUIRED_WORD_COUNT };\n","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editPost\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"plugins\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"wordcount\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { PluginSidebar, PluginSidebarMoreMenuItem } from '@wordpress/edit-post';\nimport {\n\tPluginDocumentSettingPanel,\n\tPluginPrePublishPanel,\n} from '@wordpress/edit-post';\nimport { registerPlugin } from '@wordpress/plugins';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useState } from '@wordpress/element';\nimport { serialize } from '@wordpress/blocks';\nimport { count } from '@wordpress/wordcount';\nimport PrePublishDisplay from './PrePublishDisplay';\nimport { REQUIRED_WORD_COUNT } from './constants';\n\n/**\n * Render function for the plugin\n *\n * @returns {JSX.Element}\n */\nconst render = () => {\n\n\t// var and func for keeping state\n\tconst [ wordCountDisplay, setWordCountDisplay ] = useState( '' );\n\tconst [ wordReady, setWordReady ] = useState( '' );\n\tconst [ imgReady, setImgReady ] = useState( '' );\n\n\t// funcs to handle locking post\n\tconst {\n\t\t      lockPostSaving,\n\t\t      unlockPostSaving,\n\t\t      enablePublishSidebar,\n\t\t      disablePublishSidebar,\n\t      } = useDispatch( 'core/editor' );\n\n\t// Gets all blocks in post\n\tconst { blocks, cats, tags, featuredImageID } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tblocks: select( 'core/block-editor' ).getBlocks(),\n\t\t\tcats: select( 'core/editor' ).getEditedPostAttribute( 'categories' ),\n\t\t\ttags: select( 'core/editor' ).getEditedPostAttribute( 'tags' ),\n\t\t\tfeaturedImageID:\n\t\t\t\tselect( 'core/editor' ).getEditedPostAttribute( 'featured_media' ),\n\t\t};\n\t} );\n\n\t// Runs everytime `blocks` updates\n\tuseEffect( () => {\n\t\tlet lockPost = false;\n\t\tsetWordReady( true );\n\t\tsetImgReady( true );\n\t\tconsole.log( 'blocks', blocks );\n\t\t// Filter out P blocks\n\t\tlet countable = blocks.filter( block => block.name === 'core/paragraph' );\n\t\t// Count words in paragraph blocks\n\t\tconst wordCount = count( serialize( countable ), 'words' );\n\t\t// Set state with wordCount\n\t\tsetWordCountDisplay( wordCount );\n\t\tconsole.log( `required wordCount ${ REQUIRED_WORD_COUNT }` );\n\t\t// lock if fewer than 10 words\n\t\tif ( wordCount < REQUIRED_WORD_COUNT ) {\n\t\t\tlockPost = true;\n\t\t\tsetWordReady( false );\n\t\t}\n\t\tif ( ! featuredImageID ) {\n\t\t\tlockPost = true;\n\t\t\tsetImgReady( false );\n\t\t}\n\n\t\tif ( lockPost ) {\n\t\t\tlockPostSaving();\n\t\t\tdisablePublishSidebar();\n\t\t} else {\n\t\t\tunlockPostSaving();\n\t\t\tenablePublishSidebar();\n\t\t}\n\t}, [ blocks, featuredImageID ] );\n\n\treturn (\n\t\t<>\n\t\t\t<PluginDocumentSettingPanel\n\t\t\t\tname=\"prepublish-checklist\"\n\t\t\t\ttitle=\"PREPublish Checklist\"\n\t\t\t\tclassName=\"prepublish-checklist\"\n\t\t\t>\n\t\t\t\t<PrePublishDisplay\n\t\t\t\t\twordCount={ wordCountDisplay }\n\t\t\t\t\twordLock={ ! wordReady }\n\t\t\t\t\timgLock={ ! imgReady }\n\t\t\t\t/>\n\t\t\t</PluginDocumentSettingPanel>\n\t\t\t<PluginPrePublishPanel>\n\t\t\t\tWord Count: { wordCountDisplay }\n\t\t\t</PluginPrePublishPanel>\n\t\t</>\n\t);\n};\n\n// register plugin\nregisterPlugin( 'prepublish', {\n\ticon: 'forms',\n\trender,\n} );\n"],"names":["Icon","starEmpty","starFilled","PanelBody","PanelRow","PrePublishDisplay","wordCount","wordLock","imgLock","console","log","wordIcon","imgIcon","REQUIRED_WORD_COUNT","PluginSidebar","PluginSidebarMoreMenuItem","PluginDocumentSettingPanel","PluginPrePublishPanel","registerPlugin","useSelect","useDispatch","useEffect","useState","serialize","count","render","wordCountDisplay","setWordCountDisplay","wordReady","setWordReady","imgReady","setImgReady","lockPostSaving","unlockPostSaving","enablePublishSidebar","disablePublishSidebar","blocks","cats","tags","featuredImageID","select","getBlocks","getEditedPostAttribute","lockPost","countable","filter","block","name","icon"],"sourceRoot":""}